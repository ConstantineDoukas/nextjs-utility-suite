# netlify.toml

# 1. Build command and publish directory
[build]
  command = "npm run build"
  publish = ".next"

# 2. Next.js plugin declaration
[[plugins]]
  package = "@netlify/plugin-nextjs"

# 3. Target the specific audit function (FIXED SYNTAX)
# Use double brackets and specify the function directory/path
[[functions]]
  # This targets functions generated from files within this directory
  included_files = ["src/app/api/audit/**"] 
  timeout = 60 # Increase timeout just for this function to 60 seconds

# 4. Keep your existing headers
[[headers]]
  for = "/*"
  [headers.values]
    Cross-Origin-Opener-Policy = "same-origin"
    Cross-Origin-Embedder-Policy = "require-corp"